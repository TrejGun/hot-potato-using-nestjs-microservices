"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const health_check_schema_1 = require("./health-check.schema");
const noop = () => { };
function getSwaggerDefinitions(swagger) {
    const { ApiOkResponse, ApiServiceUnavailableResponse } = swagger;
    // Possible HTTP Status
    const ServiceUnavailable = ApiServiceUnavailableResponse({
        description: 'The Health Check is not successful',
        schema: health_check_schema_1.getHealthCheckSchema('error'),
    });
    const Ok = ApiOkResponse({
        description: 'The Health Check is successful',
        schema: health_check_schema_1.getHealthCheckSchema('ok'),
    });
    // Combine all the SwaggerDecorators
    return (target, key, descriptor) => {
        ServiceUnavailable(target, key, descriptor);
        Ok(target, key, descriptor);
    };
}
exports.HealthCheck = () => {
    let swagger = null;
    try {
        // Dynamically load swagger, in case it is not installed
        swagger = require('@nestjs/swagger');
    }
    catch (_a) { }
    if (swagger) {
        return getSwaggerDefinitions(swagger);
    }
    return noop;
};
